{"ast":null,"code":"var _jsxFileName = \"/Users/bytedance/Desktop/simple-mobile-web-im/src/router/FrontendAuth.jsx\";\nimport React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport MainView from '@pages/mainView';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst FrontendAuth = props => {\n  const {\n    routerConfig,\n    location\n  } = props;\n  const {\n    pathname\n  } = location;\n  const isLogin = sessionStorage.getItem(\"user\"); // console.log(pathname, isLogin);\n  // console.log(location);\n  // 如果该路由不用进行权限校验，登录状态下登陆页除外\n  // 因为登陆后，无法跳转到登陆页\n  // 这部分代码，是为了在非登陆状态下，访问不需要权限校验的路由\n\n  const targetRouterConfig = routerConfig.find(item => item.path === pathname); // console.log(targetRouterConfig);\n\n  if (targetRouterConfig && !targetRouterConfig.auth && !isLogin) {\n    const {\n      component\n    } = targetRouterConfig;\n    return /*#__PURE__*/_jsxDEV(Route, {\n      exact: true,\n      path: pathname,\n      component: component\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 14\n    }, this);\n  }\n\n  if (isLogin) {\n    // 如果是登陆状态，想要跳转到登陆，重定向到主页\n    if (pathname === \"/login\" || pathname === \"/\") {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/mainView\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 16\n      }, this);\n    } else {\n      // 如果路由合法，就跳转到相应的路由\n      if (targetRouterConfig) {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/mainView\",\n            component: MainView\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/404\",\n            component: targetRouterConfig.component\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true);\n      } else {\n        // 如果路由不合法，重定向到 404 页面\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/404\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 18\n        }, this);\n      }\n    }\n  } else {\n    // 非登陆状态下，当路由合法时且需要权限校验时，跳转到登陆页面，要求登陆\n    if (targetRouterConfig && targetRouterConfig.auth || pathname === \"/\") {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 16\n      }, this);\n    } else {\n      // 非登陆状态下，路由不合法时，重定向至 404\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/404\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this);\n    }\n  }\n};\n\n_c = FrontendAuth;\nexport default FrontendAuth;\n\nvar _c;\n\n$RefreshReg$(_c, \"FrontendAuth\");","map":{"version":3,"sources":["/Users/bytedance/Desktop/simple-mobile-web-im/src/router/FrontendAuth.jsx"],"names":["React","Route","Redirect","MainView","FrontendAuth","props","routerConfig","location","pathname","isLogin","sessionStorage","getItem","targetRouterConfig","find","item","path","auth","component"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,kBAAhC;AACA,OAAOC,QAAP,MAAqB,iBAArB;;;;AACA,MAAMC,YAAY,GAAIC,KAAD,IAAW;AAC5B,QAAM;AAACC,IAAAA,YAAD;AAAcC,IAAAA;AAAd,MAA0BF,KAAhC;AACA,QAAM;AAACG,IAAAA;AAAD,MAAaD,QAAnB;AACA,QAAME,OAAO,GAAGC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAhB,CAH4B,CAI5B;AACA;AACA;AACA;AACA;;AACA,QAAMC,kBAAkB,GAAGN,YAAY,CAACO,IAAb,CACxBC,IAAD,IAAUA,IAAI,CAACC,IAAL,KAAcP,QADC,CAA3B,CAT4B,CAY5B;;AACA,MAAII,kBAAkB,IAAI,CAACA,kBAAkB,CAACI,IAA1C,IAAkD,CAACP,OAAvD,EAAgE;AAC9D,UAAM;AAAEQ,MAAAA;AAAF,QAAgBL,kBAAtB;AACA,wBAAO,QAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAEJ,QAAnB;AAA6B,MAAA,SAAS,EAAES;AAAxC;AAAA;AAAA;AAAA;AAAA,YAAP;AACD;;AACD,MAAIR,OAAJ,EAAa;AACX;AACA,QAAID,QAAQ,KAAK,QAAb,IAAyBA,QAAQ,KAAK,GAA1C,EAA+C;AAC7C,0BAAO,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cAAP;AACD,KAFD,MAEO;AACL;AACA,UAAII,kBAAJ,EAAwB;AACtB,4BACE;AAAA,kCACE,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,WAAZ;AAAwB,YAAA,SAAS,EAAET;AAAnC;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,MAAZ;AAAmB,YAAA,SAAS,EAAES,kBAAkB,CAACK;AAAjD;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA,wBADF;AAOD,OARD,MAQO;AACL;AACA,4BAAO,QAAC,QAAD;AAAU,UAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAAP;AACD;AACF;AACF,GAnBD,MAmBO;AACL;AACA,QAAKL,kBAAkB,IAAIA,kBAAkB,CAACI,IAA1C,IAAiDR,QAAQ,KAAK,GAAlE,EAAuE;AACrE,0BAAO,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cAAP;AACD,KAFD,MAEO;AACL;AACA,0BACA,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cADA;AAED;AACF;AAEJ,CA/CD;;KAAMJ,Y;AAgDN,eAAeA,YAAf","sourcesContent":["import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport MainView from '@pages/mainView'\nconst FrontendAuth = (props) => {\n    const {routerConfig,location} = props\n    const {pathname} = location;\n    const isLogin = sessionStorage.getItem(\"user\");\n    // console.log(pathname, isLogin);\n    // console.log(location);\n    // 如果该路由不用进行权限校验，登录状态下登陆页除外\n    // 因为登陆后，无法跳转到登陆页\n    // 这部分代码，是为了在非登陆状态下，访问不需要权限校验的路由\n    const targetRouterConfig = routerConfig.find(\n      (item) => item.path === pathname\n    );\n    // console.log(targetRouterConfig);\n    if (targetRouterConfig && !targetRouterConfig.auth && !isLogin) {\n      const { component } = targetRouterConfig;\n      return <Route exact path={pathname} component={component} />;\n    }\n    if (isLogin) {\n      // 如果是登陆状态，想要跳转到登陆，重定向到主页\n      if (pathname === \"/login\" || pathname === \"/\") {\n        return <Redirect to=\"/mainView\" />;\n      } else {\n        // 如果路由合法，就跳转到相应的路由\n        if (targetRouterConfig) {\n          return (\n            <>\n              <Route path=\"/mainView\" component={MainView} />\n              <Route path=\"/404\" component={targetRouterConfig.component} />\n            </>\n            \n          );\n        } else {\n          // 如果路由不合法，重定向到 404 页面\n          return <Redirect to=\"/404\" />;\n        }\n      }\n    } else {\n      // 非登陆状态下，当路由合法时且需要权限校验时，跳转到登陆页面，要求登陆\n      if ((targetRouterConfig && targetRouterConfig.auth)||pathname === \"/\") {\n        return <Redirect to=\"/login\" />;\n      } else {\n        // 非登陆状态下，路由不合法时，重定向至 404\n        return (\n        <Redirect to=\"/404\" />);\n      }\n    }\n\n}\nexport default FrontendAuth"]},"metadata":{},"sourceType":"module"}